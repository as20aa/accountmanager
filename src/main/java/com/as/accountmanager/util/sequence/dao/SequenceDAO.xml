<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.as.accountmanager.util.sequence.dao.SequenceDAO">
    <resultMap id="Sequence" type="com.as.accountmanager.util.sequence.dao.vo.SequenceVO"></resultMap>
    <update id="getValue">
        update TB_SEQUENCE set CURR_VALUE = CURR_VALUE +1 WHERE NAME = #{name}
        <selectKey keyColumn="CURR_VALUE" keyProperty="CURR_VALUE" order="BEFORE" resultType="int">
            select CURR_VALUE FROM TB_SEQUENCE WHERE NAME=#{name}
        </selectKey>
    </update>

    <select id="getSequence" resultType="Sequence">
        select * from TB_SEQUENCE
    </select>

    <update id="resetSequence">
        update TB_SEQUENCE set curr_value=0 where name=#{name}
    </update>

    <insert id="addSequence">
        insert into TB_SEQUENCE (NAME, CURRY_VALUE, INIT_VALUE, STEP, MAX_VALUE, IND_STATUS) VALUES (#{name}, #{currValue},
        #{initValue}, #{step}, #{maxValue}, #{indStatus})
    </insert>
</mapper>